@namespace Vibe.UI.Components
@inherits Base.VibeComponent

<div class="@CombinedClass @(IndeterminateAnimation ? "animate" : string.Empty)" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="@Value">
    <div class="progress-indicator" style="width: @ProgressPercentage"></div>
</div>

@code {
    /// <summary>
    /// Gets or sets the current value of the progress bar (0-100).
    /// </summary>
    [Parameter]
    public int Value { get; set; }

    /// <summary>
    /// Gets or sets whether the progress bar should show an indeterminate animation.
    /// </summary>
    [Parameter]
    public bool IndeterminateAnimation { get; set; }

    /// <summary>
    /// Gets or sets the color variant of the progress bar.
    /// </summary>
    [Parameter]
    public string? Variant { get; set; } = "default";

    /// <summary>
    /// Gets the component CSS class name.
    /// </summary>
    protected override string ComponentClass => $"vibe-progress vibe-progress-{Variant}";

    /// <summary>
    /// Gets the calculated progress percentage string.
    /// </summary>
    private string ProgressPercentage => IndeterminateAnimation ? "100%" : $"{Math.Clamp(Value, 0, 100)}%";
}