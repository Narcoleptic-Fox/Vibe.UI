@namespace Vibe.UI.Components
@inherits Vibe.UI.Base.VibeComponent

<span class="@CombinedClass" @attributes="AdditionalAttributes">
    <span class="vibe-tag-label">@Label</span>
    @if (Removable)
    {
        <button type="button" class="vibe-tag-remove" @onclick="HandleRemove" aria-label="Remove tag">
            <span aria-hidden="true">&times;</span>
        </button>
    }
</span>

@code {
    /// <summary>
    /// Gets or sets the tag label text.
    /// </summary>
    [Parameter]
    public string Label { get; set; } = string.Empty;

    /// <summary>
    /// Gets or sets the visual variant of the tag.
    /// </summary>
    [Parameter]
    public Vibe.UI.Enums.TagVariant Variant { get; set; } = Vibe.UI.Enums.TagVariant.Default;

    /// <summary>
    /// Gets or sets the size of the tag.
    /// </summary>
    [Parameter]
    public Vibe.UI.Enums.TagSize Size { get; set; } = Vibe.UI.Enums.TagSize.Medium;

    /// <summary>
    /// Gets or sets whether the tag shows a remove button.
    /// </summary>
    [Parameter]
    public bool Removable { get; set; }

    /// <summary>
    /// Callback invoked when the remove button is clicked.
    /// </summary>
    [Parameter]
    public EventCallback OnRemove { get; set; }

    protected override string ComponentClass =>
        new Vibe.UI.Base.ClassBuilder()
            .Add("vibe-tag")
            .AddVariant("vibe-tag", Variant)
            .AddVariant("vibe-tag", Size)
            .AddIf("vibe-tag-removable", Removable)
            .AddClass(Class)
            .Build();

    private async Task HandleRemove()
    {
        if (OnRemove.HasDelegate)
        {
            await OnRemove.InvokeAsync();
        }
    }
}

