@namespace Vibe.UI.Components
@inherits Vibe.UI.Base.VibeComponent

<button type="button" class="@CombinedClass @DangerClass @DisabledClass" disabled="@Disabled" @onclick="HandleClick" @attributes="AdditionalAttributes">
    @if (!string.IsNullOrEmpty(Icon))
    {
        <span class="menu-item-icon">@Icon</span>
    }
    @ChildContent
</button>

@code {
    /// <summary>
    /// Gets or sets the menu item content
    /// </summary>
    [Parameter]
    public RenderFragment ChildContent { get; set; }

    /// <summary>
    /// Gets or sets the icon
    /// </summary>
    [Parameter]
    public string? Icon { get; set; }

    /// <summary>
    /// Gets or sets whether this is a danger action
    /// </summary>
    [Parameter]
    public bool Danger { get; set; }

    /// <summary>
    /// Gets or sets whether the item is disabled
    /// </summary>
    [Parameter]
    public bool Disabled { get; set; }

    /// <summary>
    /// Gets or sets the click event callback
    /// </summary>
    [Parameter]
    public EventCallback<MouseEventArgs> OnClick { get; set; }

    /// <inheritdoc/>
    protected override string ComponentClass => "vibe-menu-item";

    private string DangerClass => Danger ? "vibe-menu-item-danger" : string.Empty;
    private string DisabledClass => Disabled ? "vibe-menu-item-disabled" : string.Empty;

    private async Task HandleClick(MouseEventArgs e)
    {
        if (!Disabled && OnClick.HasDelegate)
        {
            await OnClick.InvokeAsync(e);
        }
    }
}
