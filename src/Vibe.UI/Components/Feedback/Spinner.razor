@namespace Vibe.UI.Components
@inherits VibeComponent

<div @attributes="AdditionalAttributes" class="@CombinedCssClass" role="status" aria-label="@Label">
    <span class="spinner" aria-hidden="true"></span>
    @if (ShowLabel && !string.IsNullOrEmpty(Label))
    {
        <span class="spinner-label">@Label</span>
    }
    <span class="sr-only">@(Label ?? "Loading...")</span>
</div>

@code {
    [Parameter]
    public SpinnerSize Size { get; set; } = SpinnerSize.Default;

    [Parameter]
    public string Color { get; set; } = "primary";

    [Parameter]
    public string? Label { get; set; }

    [Parameter]
    public bool ShowLabel { get; set; } = false;

    [Parameter]
    public string? CssClass { get; set; }

    private string CombinedCssClass => CombineClasses(
        "vibe-spinner",
        $"spinner-{Size.ToString().ToLower()}",
        $"spinner-{Color.ToLower()}",
        CssClass
    );

    protected override string ComponentClass => CombinedCssClass;

    public enum SpinnerSize
    {
        Small,
        Default,
        Medium,
        Large
    }
}
