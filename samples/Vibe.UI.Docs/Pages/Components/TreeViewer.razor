@page "/components/treeview"
@using Vibe.UI.Components
@using static Vibe.UI.Components.TreeView

<PageTitle>TreeView - Vibe.UI</PageTitle>

<div class="vibe-max-w-4xl vibe-mx-auto">
    <!-- Header -->
    <header class="vibe-mb-8">
        <div class="vibe-flex vibe-items-center vibe-gap-2 vibe-text-sm vibe-text-zinc-500 vibe-mb-2">
            <a href="./" class="hover:vibe-text-zinc-700 dark:hover:vibe-text-zinc-300">Docs</a>
            <span>/</span>
            <a href="components" class="hover:vibe-text-zinc-700 dark:hover:vibe-text-zinc-300">Components</a>
            <span>/</span>
            <span class="vibe-text-zinc-900 dark:vibe-text-zinc-100">TreeView</span>
        </div>
        <h1 class="vibe-text-3xl vibe-font-bold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-3">TreeView</h1>
        <p class="vibe-text-lg vibe-text-zinc-600 dark:vibe-text-zinc-400">
            A hierarchical tree component for displaying nested data with expandable/collapsible nodes.
        </p>
    </header>

    <!-- Interactive Preview -->
    <section class="vibe-mb-12">
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-4">Interactive Preview</h2>
        <LivePreview Code="@PreviewCode">
            <PreviewContent>
                <div class="vibe-max-w-sm vibe-mx-auto">
                    <TreeView Items="treeNodes" />
                </div>
            </PreviewContent>
        </LivePreview>
    </section>

    <!-- Examples -->
    <section class="vibe-mb-12">
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-6">Examples</h2>

        <div class="vibe-space-y-8">
            <div>
                <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-3">Basic</h3>
                <CodeBlock Code="@BasicCode" Language="razor" />
            </div>

            <div>
                <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-3">With Icons</h3>
                <CodeBlock Code="@IconsCode" Language="razor" />
            </div>

            <div>
                <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-3">Selection</h3>
                <CodeBlock Code="@SelectableCode" Language="razor" />
            </div>

            <div>
                <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-3">Checkboxes + Multi-select</h3>
                <CodeBlock Code="@CheckableCode" Language="razor" />
            </div>

            <div>
                <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-3">Lazy Loading</h3>
                <CodeBlock Code="@LazyLoadCode" Language="razor" />
            </div>
        </div>
    </section>

    <!-- API Reference -->
    <section class="vibe-mb-12">
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-6">API Reference</h2>

        <div class="vibe-mb-8">
            <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-4">Properties</h3>
            <div class="vibe-overflow-x-auto">
                <table class="vibe-w-full vibe-text-sm">
                    <thead>
                        <tr class="vibe-border-b vibe-border-zinc-200 dark:vibe-border-zinc-700">
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Name</th>
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Type</th>
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Default</th>
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="vibe-border-b vibe-border-zinc-100 dark:vibe-border-zinc-800">
                            <td class="vibe-py-3 vibe-px-4"><code>Items</code></td>
                            <td class="vibe-py-3 vibe-px-4"><code>List&lt;TreeNode&gt;?</code></td>
                            <td class="vibe-py-3 vibe-px-4">null</td>
                            <td class="vibe-py-3 vibe-px-4">Root nodes to render.</td>
                        </tr>
                        <tr class="vibe-border-b vibe-border-zinc-100 dark:vibe-border-zinc-800">
                            <td class="vibe-py-3 vibe-px-4"><code>SelectedValue</code></td>
                            <td class="vibe-py-3 vibe-px-4"><code>string?</code></td>
                            <td class="vibe-py-3 vibe-px-4">null</td>
                            <td class="vibe-py-3 vibe-px-4">Selected node id (single-select).</td>
                        </tr>
                        <tr class="vibe-border-b vibe-border-zinc-100 dark:vibe-border-zinc-800">
                            <td class="vibe-py-3 vibe-px-4"><code>ShowCheckboxes</code></td>
                            <td class="vibe-py-3 vibe-px-4"><code>bool</code></td>
                            <td class="vibe-py-3 vibe-px-4">false</td>
                            <td class="vibe-py-3 vibe-px-4">Show checkboxes for nodes.</td>
                        </tr>
                        <tr class="vibe-border-b vibe-border-zinc-100 dark:vibe-border-zinc-800">
                            <td class="vibe-py-3 vibe-px-4"><code>MultiSelect</code></td>
                            <td class="vibe-py-3 vibe-px-4"><code>bool</code></td>
                            <td class="vibe-py-3 vibe-px-4">false</td>
                            <td class="vibe-py-3 vibe-px-4">Enable multi-select mode.</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4"><code>CssClass</code></td>
                            <td class="vibe-py-3 vibe-px-4"><code>string?</code></td>
                            <td class="vibe-py-3 vibe-px-4">null</td>
                            <td class="vibe-py-3 vibe-px-4">Additional CSS classes.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="vibe-mb-8">
            <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-4">Events</h3>
            <div class="vibe-overflow-x-auto">
                <table class="vibe-w-full vibe-text-sm">
                    <thead>
                        <tr class="vibe-border-b vibe-border-zinc-200 dark:vibe-border-zinc-700">
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Name</th>
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Type</th>
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="vibe-border-b vibe-border-zinc-100 dark:vibe-border-zinc-800">
                            <td class="vibe-py-3 vibe-px-4"><code>SelectedValueChanged</code></td>
                            <td class="vibe-py-3 vibe-px-4"><code>EventCallback&lt;string?&gt;</code></td>
                            <td class="vibe-py-3 vibe-px-4">Raised when selection changes (single-select).</td>
                        </tr>
                        <tr class="vibe-border-b vibe-border-zinc-100 dark:vibe-border-zinc-800">
                            <td class="vibe-py-3 vibe-px-4"><code>OnNodeClick</code></td>
                            <td class="vibe-py-3 vibe-px-4"><code>EventCallback&lt;TreeNode&gt;</code></td>
                            <td class="vibe-py-3 vibe-px-4">Raised when a node is clicked.</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4"><code>OnNodeExpand</code></td>
                            <td class="vibe-py-3 vibe-px-4"><code>EventCallback&lt;TreeNode&gt;</code></td>
                            <td class="vibe-py-3 vibe-px-4">Raised when a node expands/collapses.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Installation -->
    <section class="vibe-mb-12">
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-4">Installation</h2>
        <p class="vibe-text-zinc-600 dark:vibe-text-zinc-400">Install this component using the Vibe.UI CLI:</p>
        <CodeBlock Code="@InstallCode" Language="bash" />
    </section>

    <!-- Related -->
    <section class="vibe-mb-12">
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-4">Related Components</h2>
        <div class="vibe-flex vibe-gap-2">
            @foreach (var related in relatedComponents)
            {
                <a href="@($"components/{related.ToLower()}")"
                   class="vibe-px-4 vibe-py-2 vibe-bg-zinc-100 dark:vibe-bg-zinc-800 vibe-rounded-lg hover:vibe-bg-zinc-200 dark:hover:vibe-bg-zinc-700 vibe-transition-colors vibe-text-zinc-900 dark:vibe-text-zinc-100">
                    @related
                </a>
            }
        </div>
    </section>
</div>

@code {
    private List<TreeNode> treeNodes = new()
    {
        new() { Label = "Documents", Icon = @<span>üìÅ</span>, Children = new() { new() { Label = "Work", Icon = @<span>üìÑ</span> }, new() { Label = "Personal", Icon = @<span>üìÑ</span> } } },
        new() { Label = "Pictures", Icon = @<span>üñºÔ∏è</span>, Children = new() { new() { Label = "Vacation 2024", Icon = @<span>üß≥</span> }, new() { Label = "Family", Icon = @<span>üë™</span> } } },
        new() { Label = "Downloads", Icon = @<span>‚¨áÔ∏è</span> },
        new() { Label = "Music", Icon = @<span>üéµ</span> }
    };

    private List<string> relatedComponents = new() { "Accordion", "Collapsible" };

    private string PreviewCode => @"<TreeView Items=""@treeNodes"" />";

    private string InstallCode => "vibe add treeview";

    private string BasicCode => @"<TreeView Items=""@items"" />

@code {
    private List<TreeNode> items = new()
    {
        new() { Label = ""Documents"", Children = new() { new() { Label = ""Work"" }, new() { Label = ""Personal"" } } },
        new() { Label = ""Pictures"" },
        new() { Label = ""Downloads"" }
    };
}";

    private string IconsCode => @"<TreeView Items=""@items"" />

@code {
    private List<TreeNode> items = new()
    {
        new() { Label = ""Documents"", Icon = @<span>üìÅ</span> },
        new() { Label = ""Pictures"", Icon = @<span>üñºÔ∏è</span> },
        new() { Label = ""Downloads"", Icon = @<span>‚¨áÔ∏è</span> }
    };
}";

    private string SelectableCode => @"<TreeView Items=""@items""
          SelectedValue=""@selected""
          SelectedValueChanged=""@((value) => selected = value)"" />

@if (!string.IsNullOrEmpty(selected))
{
    <p>Selected: <code>@selected</code></p>
}

@code {
    private string? selected;

    private List<TreeNode> items = new()
    {
        new() { Label = ""Documents"" },
        new() { Label = ""Pictures"" },
        new() { Label = ""Downloads"" }
    };
}";

    private string CheckableCode => @"<TreeView Items=""@items""
          ShowCheckboxes=""true""
          MultiSelect=""true"" />

@code {
    private List<TreeNode> items = new()
    {
        new() { Label = ""Documents"", Children = new() { new() { Label = ""Work"" }, new() { Label = ""Personal"" } } },
        new() { Label = ""Pictures"" },
        new() { Label = ""Downloads"" }
    };
}";

    private string LazyLoadCode => @"<TreeView Items=""@items"" OnNodeExpand=""LoadChildrenAsync"" />

@code {
    private List<TreeNode> items = new()
    {
        new() { Label = ""Documents"" },
        new() { Label = ""Pictures"" }
    };

    private async Task LoadChildrenAsync(TreeNode node)
    {
        if (node.Children is { Count: > 0 })
            return;

        await Task.Delay(250); // simulate async work

        node.Children = new()
        {
            new() { Label = $""Loaded child for {node.Label}"" }
        };
    }
}";
}



