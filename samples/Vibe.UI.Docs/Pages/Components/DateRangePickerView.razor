@page "/components/daterangepicker"

<PageTitle>DateRangePicker - Vibe.UI</PageTitle>

<div class="vibe-max-w-4xl vibe-mx-auto">
    <!-- Header -->
    <header class="vibe-mb-8">
        <div class="vibe-flex vibe-items-center vibe-gap-2 vibe-text-sm vibe-text-zinc-500 vibe-mb-2">
            <a href="./" class="hover:vibe-text-zinc-700 dark:hover:vibe-text-zinc-300">Docs</a>
            <span>/</span>
            <a href="components" class="hover:vibe-text-zinc-700 dark:hover:vibe-text-zinc-300">Components</a>
            <span>/</span>
            <span class="vibe-text-zinc-900 dark:vibe-text-zinc-100">DateRangePicker</span>
        </div>
        <h1 class="vibe-text-3xl vibe-font-bold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-3">DateRangePicker</h1>
        <p class="vibe-text-lg vibe-text-zinc-600 dark:vibe-text-zinc-400">
            An input component for selecting a start and end date range with a calendar popup interface.
        </p>
    </header>

    <!-- Preview -->
    <section class="vibe-mb-12">
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-4">Preview</h2>
        <div class="vibe-p-6 vibe-rounded-xl vibe-border vibe-border-zinc-200 dark:vibe-border-zinc-800 vibe-bg-white dark:vibe-bg-zinc-900">
            <div class="vibe-flex vibe-flex-col vibe-gap-6 vibe-max-w-2xl vibe-mx-auto">
                <DateRangePicker @bind-StartDate="@startDate"
                                @bind-EndDate="@endDate"
                                MinDate="@DateTime.Today.AddMonths(-1)"
                                MaxDate="@DateTime.Today.AddMonths(3)"
                                StartDatePlaceholder="Start date"
                                EndDatePlaceholder="End date" />

                @if (startDate.HasValue && endDate.HasValue)
                {
                    <Alert Variant="AlertVariant.Info">
                        <strong>Selected Range:</strong><br />
                        From: @startDate.Value.ToString("MMMM dd, yyyy")<br />
                        To: @endDate.Value.ToString("MMMM dd, yyyy")<br />
                        Duration: @((endDate.Value - startDate.Value).Days + 1) days
                    </Alert>
                }
            </div>
        </div>
    </section>

    <!-- Examples -->
    <section class="vibe-mb-12">
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-6">Examples</h2>

        <!-- Basic -->
        <div class="vibe-mb-8">
            <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-3">Basic Range Picker</h3>
            <p class="vibe-text-zinc-600 dark:vibe-text-zinc-400 vibe-mb-4">
                A simple date range picker with two-way binding for start and end dates.
            </p>
            <CodeBlock Code="@BasicCode" Language="razor" />
        </div>

        <!-- Preset Ranges -->
        <div class="vibe-mb-8">
            <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-3">Preset Ranges</h3>
            <p class="vibe-text-zinc-600 dark:vibe-text-zinc-400 vibe-mb-4">
                Add quick preset options for common date ranges.
            </p>
            <CodeBlock Code="@PresetsCode" Language="razor" />
        </div>

        <!-- Duration Limits -->
        <div class="vibe-mb-8">
            <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-3">Min/Max Range Duration</h3>
            <p class="vibe-text-zinc-600 dark:vibe-text-zinc-400 vibe-mb-4">
                Restrict the minimum and maximum number of days in a range.
            </p>
            <CodeBlock Code="@DurationCode" Language="razor" />
        </div>

        <!-- Two Calendars -->
        <div class="vibe-mb-8">
            <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-3">Two Calendar View</h3>
            <p class="vibe-text-zinc-600 dark:vibe-text-zinc-400 vibe-mb-4">
                Display two months side-by-side for easier range selection.
            </p>
            <CodeBlock Code="@TwoCalendarsCode" Language="razor" />
        </div>

        <!-- Analytics Example -->
        <div class="vibe-mb-8">
            <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-3">In Analytics Dashboard</h3>
            <p class="vibe-text-zinc-600 dark:vibe-text-zinc-400 vibe-mb-4">
                Example usage in an analytics dashboard with preset ranges and data loading.
            </p>
            <CodeBlock Code="@AnalyticsCode" Language="razor" />
        </div>
    </section>

    <!-- API Reference -->
    <section class="vibe-mb-12">
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-6">API Reference</h2>

        <!-- Properties -->
        <div class="vibe-mb-8">
            <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-4">Properties</h3>
            <div class="vibe-overflow-x-auto">
                <table class="vibe-w-full vibe-text-sm">
                    <thead>
                        <tr class="vibe-border-b vibe-border-zinc-200 dark:vibe-border-zinc-700">
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Name</th>
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Type</th>
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Default</th>
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Description</th>
                        </tr>
                    </thead>
                    <tbody class="vibe-divide-y vibe-divide-zinc-100 dark:vibe-divide-zinc-800">
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">StartDate</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="DateTime?" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-500">null</td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">Start date of the range</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">EndDate</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="DateTime?" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-500">null</td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">End date of the range</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">Placeholder</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="string" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-500">"Select date range"</td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">Placeholder text when empty</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">MinDate</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="DateTime?" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-500">null</td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">Minimum selectable date</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">MaxDate</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="DateTime?" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-500">null</td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">Maximum selectable date</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">MinDays</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="int?" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-500">null</td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">Minimum number of days in range</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">MaxDays</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="int?" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-500">null</td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">Maximum number of days in range</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">ShowPresets</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="bool" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-500">false</td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">Show preset date range options</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Events -->
        <div class="vibe-mb-8">
            <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-800 dark:vibe-text-zinc-200 vibe-mb-4">Events</h3>
            <div class="vibe-overflow-x-auto">
                <table class="vibe-w-full vibe-text-sm">
                    <thead>
                        <tr class="vibe-border-b vibe-border-zinc-200 dark:vibe-border-zinc-700">
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Name</th>
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Type</th>
                            <th class="vibe-text-left vibe-py-3 vibe-px-4 vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100">Description</th>
                        </tr>
                    </thead>
                    <tbody class="vibe-divide-y vibe-divide-zinc-100 dark:vibe-divide-zinc-800">
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">StartDateChanged</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="EventCallback<DateTime?>" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">Callback when start date changes</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">EndDateChanged</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="EventCallback<DateTime?>" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">Callback when end date changes</td>
                        </tr>
                        <tr>
                            <td class="vibe-py-3 vibe-px-4 vibe-font-mono vibe-text-sm vibe-text-zinc-900 dark:vibe-text-zinc-100">OnRangeSelected</td>
                            <td class="vibe-py-3 vibe-px-4"><TypeBadge Type="EventCallback<DateRange>" /></td>
                            <td class="vibe-py-3 vibe-px-4 vibe-text-zinc-600 dark:vibe-text-zinc-400">Callback when both dates are selected</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Installation -->
    <section class="vibe-mb-12">
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-4">Installation</h2>
        <p class="vibe-text-zinc-600 dark:vibe-text-zinc-400 vibe-mb-4">
            Install the DateRangePicker component using the Vibe.UI CLI:
        </p>
        <CodeBlock Code="vibe add daterangepicker" Language="bash" />
    </section>

    <!-- Accessibility -->
    <section class="vibe-mb-12">
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-4">Accessibility</h2>
        <div class="vibe-prose dark:vibe-prose-invert vibe-max-w-none">
            <ul class="vibe-space-y-2 vibe-text-zinc-600 dark:vibe-text-zinc-400">
                <li class="vibe-flex vibe-items-start vibe-gap-2">
                    <svg class="vibe-w-5 vibe-h-5 vibe-text-green-500 vibe-mt-0.5 vibe-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Two input fields for start and end dates
                </li>
                <li class="vibe-flex vibe-items-start vibe-gap-2">
                    <svg class="vibe-w-5 vibe-h-5 vibe-text-green-500 vibe-mt-0.5 vibe-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Keyboard accessible with Tab navigation
                </li>
                <li class="vibe-flex vibe-items-start vibe-gap-2">
                    <svg class="vibe-w-5 vibe-h-5 vibe-text-green-500 vibe-mt-0.5 vibe-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Arrow keys navigate calendar dates
                </li>
                <li class="vibe-flex vibe-items-start vibe-gap-2">
                    <svg class="vibe-w-5 vibe-h-5 vibe-text-green-500 vibe-mt-0.5 vibe-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Screen reader announces selected range
                </li>
                <li class="vibe-flex vibe-items-start vibe-gap-2">
                    <svg class="vibe-w-5 vibe-h-5 vibe-text-green-500 vibe-mt-0.5 vibe-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Clear visual indication of range selection
                </li>
                <li class="vibe-flex vibe-items-start vibe-gap-2">
                    <svg class="vibe-w-5 vibe-h-5 vibe-text-green-500 vibe-mt-0.5 vibe-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Escape key closes popup
                </li>
            </ul>
        </div>
    </section>

    <!-- Related Components -->
    <section>
        <h2 class="vibe-text-xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-4">Related</h2>
        <div class="vibe-grid vibe-grid-cols-1 sm:vibe-grid-cols-3 vibe-gap-4">
            <a href="components/datepicker" class="vibe-group vibe-p-4 vibe-rounded-lg vibe-border vibe-border-zinc-200 dark:vibe-border-zinc-700 hover:vibe-border-brand-teal dark:hover:vibe-border-brand-teal vibe-transition-colors">
                <h4 class="vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100 group-hover:vibe-text-brand-teal">DatePicker</h4>
                <p class="vibe-text-sm vibe-text-zinc-500">Single date selection</p>
            </a>
            <a href="components/calendar" class="vibe-group vibe-p-4 vibe-rounded-lg vibe-border vibe-border-zinc-200 dark:vibe-border-zinc-700 hover:vibe-border-brand-teal dark:hover:vibe-border-brand-teal vibe-transition-colors">
                <h4 class="vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100 group-hover:vibe-text-brand-teal">Calendar</h4>
                <p class="vibe-text-sm vibe-text-zinc-500">Calendar view component</p>
            </a>
            <a href="components/timepicker" class="vibe-group vibe-p-4 vibe-rounded-lg vibe-border vibe-border-zinc-200 dark:vibe-border-zinc-700 hover:vibe-border-brand-teal dark:hover:vibe-border-brand-teal vibe-transition-colors">
                <h4 class="vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100 group-hover:vibe-text-brand-teal">TimePicker</h4>
                <p class="vibe-text-sm vibe-text-zinc-500">Time selection input</p>
            </a>
        </div>
    </section>
</div>

@code {
    private DateTime? startDate;
    private DateTime? endDate;

    private string BasicCode => @"<DateRangePicker @bind-StartDate=""@startDate""
                 @bind-EndDate=""@endDate"" />

@if (startDate.HasValue && endDate.HasValue)
{
    <Alert Variant=""AlertVariant.Info"">
        <strong>Selected Range:</strong><br />
        From: @startDate.Value.ToShortDateString()<br />
        To: @endDate.Value.ToShortDateString()<br />
        Duration: @((endDate.Value - startDate.Value).Days + 1) days
    </Alert>
}

@code {
    private DateTime? startDate;
    private DateTime? endDate;
}";

    private string PresetsCode => @"<DateRangePicker @bind-StartDate=""@startDate""
                 @bind-EndDate=""@endDate""
                 ShowPresets=""true"">
    <Presets>
        <DateRangePreset Label=""Today""
                        OnClick=""@(() => SetRange(DateTime.Today, DateTime.Today))"" />

        <DateRangePreset Label=""Last 7 Days""
                        OnClick=""@(() => SetRange(DateTime.Today.AddDays(-6), DateTime.Today))"" />

        <DateRangePreset Label=""Last 30 Days""
                        OnClick=""@(() => SetRange(DateTime.Today.AddDays(-29), DateTime.Today))"" />

        <DateRangePreset Label=""This Month""
                        OnClick=""@(() => SetRange(
                            new DateTime(DateTime.Today.Year, DateTime.Today.Month, 1),
                            DateTime.Today))"" />

        <DateRangePreset Label=""Last Month""
                        OnClick=""@SetLastMonth"" />
    </Presets>
</DateRangePicker>

@code {
    private DateTime? startDate;
    private DateTime? endDate;

    private void SetRange(DateTime start, DateTime end)
    {
        startDate = start;
        endDate = end;
    }

    private void SetLastMonth()
    {
        var today = DateTime.Today;
        var firstDayLastMonth = new DateTime(today.Year, today.Month, 1).AddMonths(-1);
        var lastDayLastMonth = new DateTime(today.Year, today.Month, 1).AddDays(-1);
        SetRange(firstDayLastMonth, lastDayLastMonth);
    }
}";

    private string DurationCode => @"<FormField Label=""Vacation Dates (3-14 days)"">
    <DateRangePicker @bind-StartDate=""@startDate""
                     @bind-EndDate=""@endDate""
                     MinDate=""@DateTime.Today""
                     MinDays=""3""
                     MaxDays=""14"" />
</FormField>

@if (startDate.HasValue && endDate.HasValue)
{
    var days = (endDate.Value - startDate.Value).Days + 1;

    @if (days < 3)
    {
        <Alert Variant=""AlertVariant.Warning"">
            Vacation must be at least 3 days
        </Alert>
    }
    else if (days > 14)
    {
        <Alert Variant=""AlertVariant.Warning"">
            Vacation cannot exceed 14 days
        </Alert>
    }
    else
    {
        <Alert Variant=""AlertVariant.Success"">
            Vacation: @days days
        </Alert>
    }
}

@code {
    private DateTime? startDate;
    private DateTime? endDate;
}";

    private string TwoCalendarsCode => @"<DateRangePicker @bind-StartDate=""@startDate""
                 @bind-EndDate=""@endDate""
                 ShowTwoCalendars=""true""
                 MinDate=""@DateTime.Today"" />

@code {
    private DateTime? startDate;
    private DateTime? endDate;
}";

    private string AnalyticsCode => @"<div class=""analytics-header"">
    <h2>Analytics Dashboard</h2>

    <DateRangePicker @bind-StartDate=""@dateRange.Start""
                     @bind-EndDate=""@dateRange.End""
                     ShowPresets=""true""
                     OnRangeSelected=""@LoadAnalytics"">
        <Presets>
            <DateRangePreset Label=""Last 7 Days""
                            OnClick=""@(() => SetPreset(7))"" />
            <DateRangePreset Label=""Last 30 Days""
                            OnClick=""@(() => SetPreset(30))"" />
            <DateRangePreset Label=""Last 90 Days""
                            OnClick=""@(() => SetPreset(90))"" />
            <DateRangePreset Label=""Year to Date""
                            OnClick=""@SetYearToDate"" />
        </Presets>
    </DateRangePicker>
</div>

@if (isLoading)
{
    <Spinner Label=""Loading analytics..."" />
}
else if (analyticsData != null)
{
    <div class=""analytics-cards"">
        <Card>
            <CardHeader>
                <h3>Total Revenue</h3>
            </CardHeader>
            <CardBody>
                <h2>@analyticsData.Revenue.ToString(""C"")</h2>
                <p class=""trend"">+12% from previous period</p>
            </CardBody>
        </Card>

        <Card>
            <CardHeader>
                <h3>Page Views</h3>
            </CardHeader>
            <CardBody>
                <h2>@analyticsData.PageViews.ToString(""N0"")</h2>
                <p class=""trend"">+8% from previous period</p>
            </CardBody>
        </Card>

        <Card>
            <CardHeader>
                <h3>Conversions</h3>
            </CardHeader>
            <CardBody>
                <h2>@analyticsData.Conversions</h2>
                <p class=""trend"">+5% from previous period</p>
            </CardBody>
        </Card>
    </div>
}

@code {
    private DateRange dateRange = new()
    {
        Start = DateTime.Today.AddDays(-7),
        End = DateTime.Today
    };

    private AnalyticsData analyticsData;
    private bool isLoading = false;

    protected override async Task OnInitializedAsync()
    {
        await LoadAnalytics(dateRange);
    }

    private async Task LoadAnalytics(DateRange range)
    {
        isLoading = true;
        analyticsData = await AnalyticsService.GetDataAsync(range.Start.Value, range.End.Value);
        isLoading = false;
    }

    private void SetPreset(int days)
    {
        dateRange.Start = DateTime.Today.AddDays(-days + 1);
        dateRange.End = DateTime.Today;
    }

    private void SetYearToDate()
    {
        dateRange.Start = new DateTime(DateTime.Today.Year, 1, 1);
        dateRange.End = DateTime.Today;
    }
}";
}


