@page "/components/button"
@using Vibe.UI.Docs.Models

<PageTitle>Button - Vibe.UI</PageTitle>

<div class="max-w-4xl">
    <!-- Header -->
    <header class="mb-8">
        <div class="flex items-center gap-2 text-sm text-zinc-500 mb-2">
            <a href="/" class="hover:text-zinc-700 dark:hover:text-zinc-300">Docs</a>
            <span>/</span>
            <a href="/components" class="hover:text-zinc-700 dark:hover:text-zinc-300">Components</a>
            <span>/</span>
            <span class="text-zinc-900 dark:text-zinc-100">Button</span>
        </div>
        <h1 class="text-3xl font-bold text-zinc-900 dark:text-zinc-100 mb-3">Button</h1>
        <p class="text-lg text-zinc-600 dark:text-zinc-400">
            Displays a button or a component that looks like a button.
        </p>
    </header>

    <!-- Interactive Preview -->
    <section class="mb-12">
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-4">Interactive Preview</h2>
        <LivePreview Code="@GeneratedCode" Props="@buttonProps" OnPropChanged="HandlePropChanged" OnPropsReset="HandlePropsReset">
            <PreviewContent>
                <Button Variant="@currentVariant"
                        Size="@currentSize"
                        Disabled="@currentDisabled"
                        Loading="@currentLoading">
                    @currentText
                </Button>
            </PreviewContent>
        </LivePreview>
    </section>

    <!-- Examples Section -->
    <section class="mb-12">
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-6">Examples</h2>

        <!-- Variants -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-3">Variants</h3>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Use different variants to communicate intent and hierarchy.
            </p>
            <div class="flex flex-wrap gap-3 p-6 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700 mb-3">
                <Button Variant="ButtonVariant.Primary">Primary</Button>
                <Button Variant="ButtonVariant.Secondary">Secondary</Button>
                <Button Variant="ButtonVariant.Destructive">Destructive</Button>
                <Button Variant="ButtonVariant.Outline">Outline</Button>
                <Button Variant="ButtonVariant.Ghost">Ghost</Button>
                <Button Variant="ButtonVariant.Link">Link</Button>
            </div>
            <CodeBlock Code="@VariantsCode" Language="razor" />
        </div>

        <!-- Sizes -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-3">Sizes</h3>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Buttons come in three sizes for different contexts.
            </p>
            <div class="flex flex-wrap items-center gap-3 p-6 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700 mb-3">
                <Button Size="ComponentSize.Small">Small</Button>
                <Button Size="ComponentSize.Medium">Medium</Button>
                <Button Size="ComponentSize.Large">Large</Button>
            </div>
            <CodeBlock Code="@SizesCode" Language="razor" />
        </div>

        <!-- States -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-3">States</h3>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Buttons support disabled and loading states.
            </p>
            <div class="flex flex-wrap items-center gap-3 p-6 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700 mb-3">
                <Button Disabled="true">Disabled</Button>
                <Button Loading="true">Loading</Button>
                <Button Variant="ButtonVariant.Primary" Loading="true">Saving...</Button>
            </div>
            <CodeBlock Code="@StatesCode" Language="razor" />
        </div>

        <!-- With Icons -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-3">With Icons</h3>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Add icons to enhance button meaning.
            </p>
            <div class="flex flex-wrap items-center gap-3 p-6 bg-zinc-50 dark:bg-zinc-800/50 rounded-lg border border-zinc-200 dark:border-zinc-700 mb-3">
                <Button Variant="ButtonVariant.Primary">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                    </svg>
                    Add Item
                </Button>
                <Button Variant="ButtonVariant.Outline">
                    Download
                    <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                </Button>
            </div>
            <CodeBlock Code="@IconsCode" Language="razor" />
        </div>
    </section>

    <!-- API Reference -->
    <section class="mb-12">
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-6">API Reference</h2>

        <!-- Properties -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-4">Properties</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-zinc-200 dark:border-zinc-700">
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Name</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Type</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Default</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Description</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-zinc-100 dark:divide-zinc-800">
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">Variant</td>
                            <td class="py-3 px-4"><TypeBadge Type="ButtonVariant" /></td>
                            <td class="py-3 px-4 text-zinc-500">Primary</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">The visual style variant of the button</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">Size</td>
                            <td class="py-3 px-4"><TypeBadge Type="ComponentSize" /></td>
                            <td class="py-3 px-4 text-zinc-500">Medium</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">The size of the button</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">Disabled</td>
                            <td class="py-3 px-4"><TypeBadge Type="bool" /></td>
                            <td class="py-3 px-4 text-zinc-500">false</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Whether the button is disabled</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">Loading</td>
                            <td class="py-3 px-4"><TypeBadge Type="bool" /></td>
                            <td class="py-3 px-4 text-zinc-500">false</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Show loading spinner and disable interactions</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">Type</td>
                            <td class="py-3 px-4"><TypeBadge Type="string" /></td>
                            <td class="py-3 px-4 text-zinc-500">"button"</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">HTML button type (button, submit, reset)</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">ChildContent</td>
                            <td class="py-3 px-4"><TypeBadge Type="RenderFragment" /></td>
                            <td class="py-3 px-4 text-zinc-500">â€”</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Content to display inside the button</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Events -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-4">Events</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-zinc-200 dark:border-zinc-700">
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Name</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Type</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">OnClick</td>
                            <td class="py-3 px-4"><TypeBadge Type="EventCallback<MouseEventArgs>" /></td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Callback when the button is clicked</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Installation -->
    <section class="mb-12">
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-4">Installation</h2>
        <p class="text-zinc-600 dark:text-zinc-400 mb-4">
            Install the Button component using the Vibe.UI CLI:
        </p>
        <CodeBlock Code="vibe add button" Language="bash" />
    </section>

    <!-- Accessibility -->
    <section class="mb-12">
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-4">Accessibility</h2>
        <div class="prose prose-zinc dark:prose-invert max-w-none">
            <ul class="space-y-2 text-zinc-600 dark:text-zinc-400">
                <li class="flex items-start gap-2">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Uses semantic <code class="text-sm bg-zinc-100 dark:bg-zinc-800 px-1 py-0.5 rounded">&lt;button&gt;</code> element
                </li>
                <li class="flex items-start gap-2">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Supports keyboard navigation (Enter/Space to activate)
                </li>
                <li class="flex items-start gap-2">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Proper ARIA attributes when disabled or loading
                </li>
                <li class="flex items-start gap-2">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Focus visible styles for keyboard users
                </li>
                <li class="flex items-start gap-2">
                    <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    Loading state announced to screen readers
                </li>
            </ul>
        </div>
    </section>

    <!-- Related Components -->
    <section>
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-4">Related</h2>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <a href="/components/link" class="group p-4 rounded-lg border border-zinc-200 dark:border-zinc-700 hover:border-brand-teal dark:hover:border-brand-teal transition-colors">
                <h4 class="font-medium text-zinc-900 dark:text-zinc-100 group-hover:text-brand-teal">Link</h4>
                <p class="text-sm text-zinc-500">Navigation link component</p>
            </a>
            <a href="/components/iconbutton" class="group p-4 rounded-lg border border-zinc-200 dark:border-zinc-700 hover:border-brand-teal dark:hover:border-brand-teal transition-colors">
                <h4 class="font-medium text-zinc-900 dark:text-zinc-100 group-hover:text-brand-teal">IconButton</h4>
                <p class="text-sm text-zinc-500">Icon-only button variant</p>
            </a>
            <a href="/components/buttongroup" class="group p-4 rounded-lg border border-zinc-200 dark:border-zinc-700 hover:border-brand-teal dark:hover:border-brand-teal transition-colors">
                <h4 class="font-medium text-zinc-900 dark:text-zinc-100 group-hover:text-brand-teal">ButtonGroup</h4>
                <p class="text-sm text-zinc-500">Group related buttons</p>
            </a>
        </div>
    </section>
</div>

@code {
    // Interactive preview state
    private ButtonVariant currentVariant = ButtonVariant.Primary;
    private ComponentSize currentSize = ComponentSize.Medium;
    private bool currentDisabled = false;
    private bool currentLoading = false;
    private string currentText = "Click me";

    // PropTweaker props
    private List<PropDefinition> buttonProps = new();

    protected override void OnInitialized()
    {
        InitializeProps();
    }

    private void InitializeProps()
    {
        buttonProps = new List<PropDefinition>
        {
            PropDefinition.Enum<ButtonVariant>("Variant", ButtonVariant.Primary, "Visual style of the button"),
            PropDefinition.Enum<ComponentSize>("Size", ComponentSize.Medium, "Size of the button"),
            PropDefinition.Boolean("Disabled", false, "Disable the button"),
            PropDefinition.Boolean("Loading", false, "Show loading spinner"),
            PropDefinition.String("Text", "Click me", "Button text content")
        };
    }

    private void HandlePropChanged(PropDefinition prop)
    {
        switch (prop.Name)
        {
            case "Variant":
                if (Enum.TryParse<ButtonVariant>(prop.Value?.ToString(), out var variant))
                    currentVariant = variant;
                break;
            case "Size":
                if (Enum.TryParse<ComponentSize>(prop.Value?.ToString(), out var size))
                    currentSize = size;
                break;
            case "Disabled":
                currentDisabled = prop.Value is true || prop.Value?.ToString()?.ToLower() == "true";
                break;
            case "Loading":
                currentLoading = prop.Value is true || prop.Value?.ToString()?.ToLower() == "true";
                break;
            case "Text":
                currentText = prop.Value?.ToString() ?? "Click me";
                break;
        }
        StateHasChanged();
    }

    private void HandlePropsReset()
    {
        currentVariant = ButtonVariant.Primary;
        currentSize = ComponentSize.Medium;
        currentDisabled = false;
        currentLoading = false;
        currentText = "Click me";
        InitializeProps();
        StateHasChanged();
    }

    private string GeneratedCode
    {
        get
        {
            var props = new List<string>();

            if (currentVariant != ButtonVariant.Primary)
                props.Add($"Variant=\"ButtonVariant.{currentVariant}\"");
            if (currentSize != ComponentSize.Medium)
                props.Add($"Size=\"ComponentSize.{currentSize}\"");
            if (currentDisabled)
                props.Add("Disabled=\"true\"");
            if (currentLoading)
                props.Add("Loading=\"true\"");

            var propsStr = props.Any() ? " " + string.Join(" ", props) : "";
            return $"<Button{propsStr}>{currentText}</Button>";
        }
    }

    private string VariantsCode => @"<Button Variant=""ButtonVariant.Primary"">Primary</Button>
<Button Variant=""ButtonVariant.Secondary"">Secondary</Button>
<Button Variant=""ButtonVariant.Destructive"">Destructive</Button>
<Button Variant=""ButtonVariant.Outline"">Outline</Button>
<Button Variant=""ButtonVariant.Ghost"">Ghost</Button>
<Button Variant=""ButtonVariant.Link"">Link</Button>";

    private string SizesCode => @"<Button Size=""ComponentSize.Small"">Small</Button>
<Button Size=""ComponentSize.Medium"">Medium</Button>
<Button Size=""ComponentSize.Large"">Large</Button>";

    private string StatesCode => @"<Button Disabled=""true"">Disabled</Button>
<Button Loading=""true"">Loading</Button>
<Button Variant=""ButtonVariant.Primary"" Loading=""true"">Saving...</Button>";

    private string IconsCode => @"<Button Variant=""ButtonVariant.Primary"">
    <svg class=""w-4 h-4 mr-2"" fill=""none"" stroke=""currentColor"" viewBox=""0 0 24 24"">
        <path stroke-linecap=""round"" stroke-linejoin=""round"" stroke-width=""2"" d=""M12 4v16m8-8H4""></path>
    </svg>
    Add Item
</Button>

<Button Variant=""ButtonVariant.Outline"">
    Download
    <svg class=""w-4 h-4 ml-2"" fill=""none"" stroke=""currentColor"" viewBox=""0 0 24 24"">
        <path stroke-linecap=""round"" stroke-linejoin=""round"" stroke-width=""2"" d=""M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4""></path>
    </svg>
</Button>";
}
