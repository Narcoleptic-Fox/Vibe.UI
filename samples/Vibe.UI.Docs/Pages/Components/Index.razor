@page "/components"

<PageTitle>Components - Vibe.UI</PageTitle>

<div class="vibe-max-w-6xl vibe-mx-auto">
    <!-- Header -->
    <header class="vibe-mb-12">
        <h1 class="vibe-text-4xl vibe-font-bold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-4">Components</h1>
        <p class="vibe-text-xl vibe-text-zinc-600 dark:vibe-text-zinc-400 vibe-max-w-3xl">
            Beautifully designed components built with Blazor and Vibe.CSS utilities.
            Copy and paste into your apps. Open source.
        </p>
    </header>

    <!-- Search -->
    <div class="vibe-mb-8">
        <div class="vibe-relative vibe-max-w-md">
            <svg class="vibe-absolute vibe-left-3 vibe-top-1/2 vibe--translate-y-1/2 vibe-w-5 vibe-h-5 vibe-text-zinc-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <input type="text"
                   placeholder="Search components..."
                   @bind="searchQuery"
                   @bind:event="oninput"
                   class="vibe-w-full vibe-pl-10 vibe-pr-4 vibe-py-2.5 vibe-rounded-lg vibe-border vibe-border-zinc-200 dark:vibe-border-zinc-700 vibe-bg-white dark:vibe-bg-zinc-800 vibe-text-zinc-900 dark:vibe-text-zinc-100 placeholder:vibe-text-zinc-400 focus:vibe-outline-none focus:vibe-ring-2 focus:vibe-ring-brand-teal focus:vibe-border-transparent" />
        </div>
    </div>

    <!-- Component Categories -->
    @foreach (var category in FilteredCategories)
    {
        <section class="vibe-mb-12">
            <h2 class="vibe-text-2xl vibe-font-semibold vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-2">@category.Name</h2>
            <p class="vibe-text-zinc-500 vibe-mb-6">@category.Description</p>

            <div class="vibe-grid vibe-grid-cols-1 sm:vibe-grid-cols-2 lg:vibe-grid-cols-3 vibe-gap-4">
                @foreach (var component in category.Components.Where(c => MatchesSearch(c)))
                {
                    <a href="components/@component.Slug"
                       class="vibe-group vibe-p-4 vibe-rounded-lg vibe-border vibe-border-zinc-200 dark:vibe-border-zinc-700 hover:vibe-border-brand-teal dark:hover:vibe-border-brand-teal vibe-bg-zinc-50 hover:vibe-bg-white dark:vibe-bg-zinc-800/50 dark:hover:vibe-bg-zinc-800/70 vibe-transition-all hover:vibe-shadow-md">
                        <div class="vibe-flex vibe-items-start vibe-justify-between vibe-mb-2">
                            <h3 class="vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100 group-hover:vibe-text-brand-teal vibe-transition-colors">
                                @component.Name
                            </h3>
                            @if (component.IsNew)
                            {
                                <Badge Variant="default" class="vibe-text-xs">New</Badge>
                            }
                        </div>
                        <p class="vibe-text-sm vibe-text-zinc-500 vibe-line-clamp-2">@component.Description</p>
                    </a>
                }
            </div>
        </section>
    }

    @if (!FilteredCategories.Any())
    {
        <div class="vibe-text-center vibe-py-12">
            <svg class="vibe-w-16 vibe-h-16 vibe-mx-auto vibe-text-zinc-300 dark:vibe-text-zinc-600 vibe-mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <h3 class="vibe-text-lg vibe-font-medium vibe-text-zinc-900 dark:vibe-text-zinc-100 vibe-mb-2">No components found</h3>
            <p class="vibe-text-zinc-500">Try adjusting your search query</p>
        </div>
    }
</div>

@code {
    private string searchQuery = "";

    private bool MatchesSearch(ComponentInfo component)
    {
        if (string.IsNullOrWhiteSpace(searchQuery)) return true;
        var query = searchQuery.ToLower();
        return component.Name.ToLower().Contains(query) ||
               component.Description.ToLower().Contains(query);
    }

    private IEnumerable<CategoryInfo> FilteredCategories =>
        Categories.Where(c => c.Components.Any(comp => MatchesSearch(comp)));

    private List<CategoryInfo> Categories = new()
    {
        new CategoryInfo
        {
            Name = "Layout",
            Description = "Components for structuring and organizing page content.",
            Components = new()
            {
                new("Card", "card", "Container for grouping related content"),
                new("Container", "container", "Responsive layout wrapper"),
                new("Stack", "stack", "Vertical and horizontal layouts"),
                new("Grid", "grid", "Responsive grid system"),
                new("Divider", "divider", "Visual separator between content"),
                new("AspectRatio", "aspectratio", "Maintain aspect ratio for media"),
            }
        },
        new CategoryInfo
        {
            Name = "Forms",
            Description = "Input components for collecting user data.",
            Components = new()
            {
                new("Button", "button", "Clickable button element"),
                new("Input", "input", "Text input field"),
                new("Checkbox", "checkbox", "Boolean toggle input"),
                new("RadioGroup", "radiogroup", "Group of radio buttons"),
                new("Select", "select", "Dropdown selection"),
                new("Switch", "switch", "Toggle switch control"),
                new("Slider", "slider", "Range value selector"),
                new("DatePicker", "datepicker", "Date selection input"),
                new("TimePicker", "timepicker", "Time selection input"),
                new("DateRangePicker", "daterangepicker", "Date range selection"),
                new("Form", "form", "Form container with validation"),
                new("FormField", "formfield", "Field wrapper with label and error"),
            }
        },
        new CategoryInfo
        {
            Name = "Data Display",
            Description = "Components for presenting information.",
            Components = new()
            {
                new("Badge", "badge", "Small status indicator"),
                new("Avatar", "avatar", "User profile image"),
                new("Tag", "tag", "Removable label"),
                new("DataGrid", "datagrid", "Tabular data display"),
                new("Table", "table", "Simple table layout"),
                new("Calendar", "calendar", "Date display vibe-grid"),
                new("Skeleton", "skeleton", "Loading placeholder"),
                new("Progress", "progress", "Progress indicator"),
                new("Spinner", "spinner", "Loading spinner"),
            }
        },
        new CategoryInfo
        {
            Name = "Feedback",
            Description = "Components for user notifications and feedback.",
            Components = new()
            {
                new("Alert", "alert", "Important message display"),
                new("Toast", "toast", "Temporary notifications"),
                new("Dialog", "dialog", "Modal dialog window"),
                new("Tooltip", "tooltip", "Contextual information popup"),
                new("Popover", "popover", "Rich content popup"),
            }
        },
        new CategoryInfo
        {
            Name = "Navigation",
            Description = "Components for navigating between pages and sections.",
            Components = new()
            {
                new("Link", "link", "Navigation link"),
                new("Menu", "menu", "Navigation menu"),
                new("Breadcrumb", "breadcrumb", "Navigation breadcrumb"),
                new("Pagination", "pagination", "Page navigation"),
                new("Stepper", "stepper", "Multi-step navigation"),
                new("Dropdown", "dropdown", "Dropdown menu"),
            }
        },
        new CategoryInfo
        {
            Name = "Overlay",
            Description = "Components that appear above other content.",
            Components = new()
            {
                new("Drawer", "drawer", "Side navigation drawer"),
            }
        },
        new CategoryInfo
        {
            Name = "Utility",
            Description = "Helper components for common patterns.",
            Components = new()
            {
                new("ThemeToggle", "themetoggle", "Dark/light mode toggle"),
                new("Separator", "separator", "Visual separator"),
                new("Collapsible", "collapsible", "Expandable content"),
            }
        },
        new CategoryInfo
        {
            Name = "Advanced",
            Description = "Complex components for specific use cases.",
            Components = new()
            {
                new("KanbanBoard", "kanbanboard", "Drag-and-drop kanban board", true),
            }
        }
    };

    private class CategoryInfo
    {
        public string Name { get; set; } = "";
        public string Description { get; set; } = "";
        public List<ComponentInfo> Components { get; set; } = new();
    }

    private class ComponentInfo
    {
        public string Name { get; set; }
        public string Slug { get; set; }
        public string Description { get; set; }
        public bool IsNew { get; set; }

        public ComponentInfo(string name, string slug, string description, bool isNew = false)
        {
            Name = name;
            Slug = slug;
            Description = description;
            IsNew = isNew;
        }
    }
}

