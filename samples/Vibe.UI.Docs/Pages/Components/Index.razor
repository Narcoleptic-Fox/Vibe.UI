@page "/components"

<PageTitle>Components - Vibe.UI</PageTitle>

<div class="max-w-6xl">
    <!-- Header -->
    <header class="mb-12">
        <h1 class="text-4xl font-bold text-zinc-900 dark:text-zinc-100 mb-4">Components</h1>
        <p class="text-xl text-zinc-600 dark:text-zinc-400 max-w-3xl">
            Beautifully designed components built with Blazor and Tailwind CSS.
            Copy and paste into your apps. Open source.
        </p>
    </header>

    <!-- Search -->
    <div class="mb-8">
        <div class="relative max-w-md">
            <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            <input type="text"
                   placeholder="Search components..."
                   @bind="searchQuery"
                   @bind:event="oninput"
                   class="w-full pl-10 pr-4 py-2.5 rounded-lg border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-brand-teal focus:border-transparent" />
        </div>
    </div>

    <!-- Component Categories -->
    @foreach (var category in FilteredCategories)
    {
        <section class="mb-12">
            <h2 class="text-2xl font-semibold text-zinc-900 dark:text-zinc-100 mb-2">@category.Name</h2>
            <p class="text-zinc-500 mb-6">@category.Description</p>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                @foreach (var component in category.Components.Where(c => MatchesSearch(c)))
                {
                    <a href="/components/@component.Slug"
                       class="group p-4 rounded-lg border border-zinc-200 dark:border-zinc-700 hover:border-brand-teal dark:hover:border-brand-teal bg-white dark:bg-zinc-800/50 transition-all hover:shadow-md">
                        <div class="flex items-start justify-between mb-2">
                            <h3 class="font-medium text-zinc-900 dark:text-zinc-100 group-hover:text-brand-teal transition-colors">
                                @component.Name
                            </h3>
                            @if (component.IsNew)
                            {
                                <Badge Variant="default" class="text-xs">New</Badge>
                            }
                        </div>
                        <p class="text-sm text-zinc-500 line-clamp-2">@component.Description</p>
                    </a>
                }
            </div>
        </section>
    }

    @if (!FilteredCategories.Any())
    {
        <div class="text-center py-12">
            <svg class="w-16 h-16 mx-auto text-zinc-300 dark:text-zinc-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <h3 class="text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-2">No components found</h3>
            <p class="text-zinc-500">Try adjusting your search query</p>
        </div>
    }
</div>

@code {
    private string searchQuery = "";

    private bool MatchesSearch(ComponentInfo component)
    {
        if (string.IsNullOrWhiteSpace(searchQuery)) return true;
        var query = searchQuery.ToLower();
        return component.Name.ToLower().Contains(query) ||
               component.Description.ToLower().Contains(query);
    }

    private IEnumerable<CategoryInfo> FilteredCategories =>
        Categories.Where(c => c.Components.Any(comp => MatchesSearch(comp)));

    private List<CategoryInfo> Categories = new()
    {
        new CategoryInfo
        {
            Name = "Layout",
            Description = "Components for structuring and organizing page content.",
            Components = new()
            {
                new("Card", "card", "Container for grouping related content"),
                new("Container", "container", "Responsive layout wrapper"),
                new("Stack", "stack", "Vertical and horizontal layouts"),
                new("Grid", "grid", "Responsive grid system"),
                new("Divider", "divider", "Visual separator between content"),
                new("AspectRatio", "aspectratio", "Maintain aspect ratio for media"),
            }
        },
        new CategoryInfo
        {
            Name = "Forms",
            Description = "Input components for collecting user data.",
            Components = new()
            {
                new("Button", "button", "Clickable button element"),
                new("Input", "input", "Text input field"),
                new("Checkbox", "checkbox", "Boolean toggle input"),
                new("Radio", "radio", "Single selection from options"),
                new("RadioGroup", "radiogroup", "Group of radio buttons"),
                new("Select", "select", "Dropdown selection"),
                new("Switch", "switch", "Toggle switch control"),
                new("Slider", "slider", "Range value selector"),
                new("DatePicker", "datepicker", "Date selection input"),
                new("TimePicker", "timepicker", "Time selection input"),
                new("DateRangePicker", "daterangepicker", "Date range selection"),
                new("Form", "form", "Form container with validation"),
                new("FormField", "formfield", "Field wrapper with label and error"),
            }
        },
        new CategoryInfo
        {
            Name = "Data Display",
            Description = "Components for presenting information.",
            Components = new()
            {
                new("Badge", "badge", "Small status indicator"),
                new("Avatar", "avatar", "User profile image"),
                new("Tag", "tag", "Removable label"),
                new("DataGrid", "datagrid", "Tabular data display"),
                new("Table", "table", "Simple table layout"),
                new("Calendar", "calendar", "Date display grid"),
                new("Skeleton", "skeleton", "Loading placeholder"),
                new("Progress", "progress", "Progress indicator"),
                new("Spinner", "spinner", "Loading spinner"),
            }
        },
        new CategoryInfo
        {
            Name = "Feedback",
            Description = "Components for user notifications and feedback.",
            Components = new()
            {
                new("Alert", "alert", "Important message display"),
                new("Toast", "toast", "Temporary notifications"),
                new("Dialog", "dialog", "Modal dialog window"),
                new("Tooltip", "tooltip", "Contextual information popup"),
                new("Popover", "popover", "Rich content popup"),
            }
        },
        new CategoryInfo
        {
            Name = "Navigation",
            Description = "Components for navigating between pages and sections.",
            Components = new()
            {
                new("Link", "link", "Navigation link"),
                new("Menu", "menu", "Navigation menu"),
                new("Tabs", "tabs", "Tabbed content navigation"),
                new("Breadcrumb", "breadcrumb", "Navigation breadcrumb"),
                new("Pagination", "pagination", "Page navigation"),
                new("Stepper", "stepper", "Multi-step navigation"),
                new("Dropdown", "dropdown", "Dropdown menu"),
            }
        },
        new CategoryInfo
        {
            Name = "Overlay",
            Description = "Components that appear above other content.",
            Components = new()
            {
                new("Modal", "modal", "Overlay modal window"),
                new("Sheet", "sheet", "Slide-in panel"),
                new("Drawer", "drawer", "Side navigation drawer"),
                new("ContextMenu", "contextmenu", "Right-click menu"),
            }
        },
        new CategoryInfo
        {
            Name = "Utility",
            Description = "Helper components for common patterns.",
            Components = new()
            {
                new("ThemeToggle", "themetoggle", "Dark/light mode toggle"),
                new("Kbd", "kbd", "Keyboard key indicator"),
                new("Separator", "separator", "Visual separator"),
                new("ScrollArea", "scrollarea", "Custom scrollable area"),
                new("Collapsible", "collapsible", "Expandable content"),
            }
        },
        new CategoryInfo
        {
            Name = "Advanced",
            Description = "Complex components for specific use cases.",
            Components = new()
            {
                new("KanbanBoard", "kanbanboard", "Drag-and-drop kanban board", true),
                new("CommandPalette", "commandpalette", "Command search palette", true),
                new("DataTable", "datatable", "Advanced data table"),
            }
        }
    };

    private class CategoryInfo
    {
        public string Name { get; set; } = "";
        public string Description { get; set; } = "";
        public List<ComponentInfo> Components { get; set; } = new();
    }

    private class ComponentInfo
    {
        public string Name { get; set; }
        public string Slug { get; set; }
        public string Description { get; set; }
        public bool IsNew { get; set; }

        public ComponentInfo(string name, string slug, string description, bool isNew = false)
        {
            Name = name;
            Slug = slug;
            Description = description;
            IsNew = isNew;
        }
    }
}
