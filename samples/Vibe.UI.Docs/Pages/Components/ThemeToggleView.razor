@page "/components/themetoggle"

<PageTitle>ThemeToggle - Vibe.UI</PageTitle>

<ComponentPage ComponentName="ThemeToggle"
               Category="Theme"
               Description="A component for switching between light and dark themes with smooth transitions and persistent preferences."
               RelatedComponents="@relatedComponents">

    <PreviewContent>
        <div class="preview-demo" style="display: flex; flex-direction: column; gap: 1.5rem; align-items: center;">
            <div style="display: flex; gap: 1rem; align-items: center;">
                <span>Toggle theme:</span>
                <ThemeToggle />
            </div>

            <Alert Variant="Alert.AlertVariant.Info">
                <strong>Current theme:</strong> @(ThemeManager?.CurrentTheme?.Name ?? "Loading...")
                <br />
                Click the toggle button above to switch between light and dark modes.
            </Alert>

            <div style="padding: 1.5rem; border: 1px solid var(--border-color); border-radius: 8px; width: 100%; max-width: 400px;">
                <h4>Themed Card Example</h4>
                <p>This card automatically adapts to the selected theme, demonstrating how components respond to theme changes.</p>
                <Button Variant="Button.ButtonVariant.Primary">Primary Button</Button>
            </div>
        </div>
    </PreviewContent>

    <Examples>
        <div class="example-item">
            <h3>Basic Toggle</h3>
            <CodeBlock Code="@BasicCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>With Icons</h3>
            <CodeBlock Code="@IconsCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>System Preference</h3>
            <CodeBlock Code="@SystemCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>Custom Themes</h3>
            <CodeBlock Code="@CustomCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>In Navigation Bar</h3>
            <CodeBlock Code="@NavBarCode" Language="razor" />
        </div>
    </Examples>

    <Props>
        <table class="api-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Default</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>Theme</code></td>
                    <td>ThemeMode</td>
                    <td>Light</td>
                    <td>Current theme mode (Light, Dark, System)</td>
                </tr>
                <tr>
                    <td><code>ShowLabel</code></td>
                    <td>bool</td>
                    <td>false</td>
                    <td>Display theme name label</td>
                </tr>
                <tr>
                    <td><code>IconOnly</code></td>
                    <td>bool</td>
                    <td>false</td>
                    <td>Show only icon without text</td>
                </tr>
                <tr>
                    <td><code>Size</code></td>
                    <td>ButtonSize</td>
                    <td>Medium</td>
                    <td>Size of the toggle button</td>
                </tr>
                <tr>
                    <td><code>Variant</code></td>
                    <td>ButtonVariant</td>
                    <td>Ghost</td>
                    <td>Visual style of the button</td>
                </tr>
                <tr>
                    <td><code>PersistPreference</code></td>
                    <td>bool</td>
                    <td>true</td>
                    <td>Save theme preference to localStorage</td>
                </tr>
            </tbody>
        </table>
    </Props>

    <Events>
        <table class="api-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>ThemeChanged</code></td>
                    <td>EventCallback&lt;ThemeMode&gt;</td>
                    <td>Callback when theme changes</td>
                </tr>
            </tbody>
        </table>
    </Events>

    <AccessibilityNotes>
        <ul>
            <li>Uses semantic button element</li>
            <li>Includes descriptive <code>aria-label</code></li>
            <li>Keyboard accessible (Enter/Space)</li>
            <li>Screen reader announces theme changes</li>
            <li>Clear focus indicators</li>
            <li>Respects user's system theme preference</li>
        </ul>
    </AccessibilityNotes>
</ComponentPage>

@using Vibe.UI.Themes.Services
@inject ThemeManager ThemeManager

@code {
    private List<string> relatedComponents = new() { "ThemeProvider", "Button", "Toggle" };

    private string BasicCode => @"<ThemeToggle @bind-Theme=""@currentTheme"" />

@code {
    private ThemeMode currentTheme = ThemeMode.Light;
}";

    private string IconsCode => @"<div class=""theme-toggle-examples"">
    <ThemeToggle IconOnly=""true""
                 Variant=""ButtonVariant.Ghost"" />

    <ThemeToggle ShowLabel=""true""
                 Variant=""ButtonVariant.Outline"" />

    <ThemeToggle ShowLabel=""true""
                 Size=""ButtonSize.Large""
                 Variant=""ButtonVariant.Secondary"" />
</div>";

    private string SystemCode => @"<ThemeToggle @bind-Theme=""@theme""
             OnThemeChanged=""@HandleThemeChange"">
    <Options>
        <ThemeOption Value=""ThemeMode.Light"" Icon=""â˜€ï¸"" Label=""Light"" />
        <ThemeOption Value=""ThemeMode.Dark"" Icon=""ðŸŒ™"" Label=""Dark"" />
        <ThemeOption Value=""ThemeMode.System"" Icon=""ðŸ’»"" Label=""System"" />
    </Options>
</ThemeToggle>

@if (theme == ThemeMode.System)
{
    <Alert Variant=""AlertVariant.Info"">
        Following system preference: @GetSystemTheme()
    </Alert>
}

@code {
    private ThemeMode theme = ThemeMode.System;

    private void HandleThemeChange(ThemeMode newTheme)
    {
        Console.WriteLine($""Theme changed to: {newTheme}"");
    }

    private string GetSystemTheme()
    {
        // Detect system theme preference
        return ""Dark""; // Example
    }
}";

    private string CustomCode => @"@inject IThemeService ThemeService

<div class=""custom-theme-selector"">
    <h3>Choose Your Theme</h3>

    <div class=""theme-options"">
        @foreach (var themeOption in availableThemes)
        {
            <div class=""theme-card @(currentTheme == themeOption.Id ? ""active"" : """")""
                 @onclick=""@(() => ApplyTheme(themeOption))"">
                <div class=""theme-preview"" style=""background: @themeOption.PreviewColor"">
                    <span class=""theme-icon"">@themeOption.Icon</span>
                </div>
                <h4>@themeOption.Name</h4>
                <p>@themeOption.Description</p>
            </div>
        }
    </div>
</div>

@code {
    private string currentTheme = ""light"";

    private List<ThemeOption> availableThemes = new()
    {
        new ThemeOption
        {
            Id = ""light"",
            Name = ""Light"",
            Icon = ""â˜€ï¸"",
            Description = ""Clean and bright"",
            PreviewColor = ""#ffffff""
        },
        new ThemeOption
        {
            Id = ""dark"",
            Name = ""Dark"",
            Icon = ""ðŸŒ™"",
            Description = ""Easy on the eyes"",
            PreviewColor = ""#1a1a1a""
        },
        new ThemeOption
        {
            Id = ""blue"",
            Name = ""Ocean"",
            Icon = ""ðŸŒŠ"",
            Description = ""Cool blue tones"",
            PreviewColor = ""#0077be""
        },
        new ThemeOption
        {
            Id = ""green"",
            Name = ""Forest"",
            Icon = ""ðŸŒ²"",
            Description = ""Natural green theme"",
            PreviewColor = ""#228b22""
        }
    };

    private async Task ApplyTheme(ThemeOption theme)
    {
        currentTheme = theme.Id;
        await ThemeService.SetThemeAsync(theme.Id);
    }

    public class ThemeOption
    {
        public string Id { get; set; }
        public string Name { get; set; }
        public string Icon { get; set; }
        public string Description { get; set; }
        public string PreviewColor { get; set; }
    }
}";

    private string NavBarCode => @"<nav class=""navbar"">
    <div class=""navbar-brand"">
        <a href=""/"">
            <img src=""/logo.svg"" alt=""Logo"" />
            <span>My App</span>
        </a>
    </div>

    <div class=""navbar-menu"">
        <a href=""/dashboard"">Dashboard</a>
        <a href=""/projects"">Projects</a>
        <a href=""/settings"">Settings</a>
    </div>

    <div class=""navbar-actions"">
        <Button Variant=""ButtonVariant.Ghost"" IconOnly=""true"">
            <span class=""icon"">ðŸ””</span>
        </Button>

        <ThemeToggle IconOnly=""true""
                     Variant=""ButtonVariant.Ghost""
                     Size=""ButtonSize.Medium"" />

        <Dropdown>
            <DropdownTrigger>
                <Avatar Src=""@currentUser.AvatarUrl""
                        Size=""AvatarSize.Small"" />
            </DropdownTrigger>
            <DropdownContent>
                <DropdownItem>Profile</DropdownItem>
                <DropdownItem>Settings</DropdownItem>
                <DropdownDivider />
                <DropdownItem>Sign Out</DropdownItem>
            </DropdownContent>
        </Dropdown>
    </div>
</nav>

@code {
    private User currentUser = new()
    {
        Name = ""John Doe"",
        AvatarUrl = ""/avatars/john.jpg""
    };
}";
}
