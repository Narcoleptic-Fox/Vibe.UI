@page "/components/tabs"
@using Vibe.UI.Components

<PageTitle>Tabs - Vibe.UI</PageTitle>

<ComponentPage ComponentName="Tabs"
               Category="Navigation"
               Description="Organizes content into multiple panels where only one is visible at a time with tab navigation."
               RelatedComponents="@relatedComponents">

    <PreviewContent>
        <div class="preview-demo" style="max-width: 800px; margin: 0 auto;">
            <Alert Variant="AlertVariant.Info" style="margin-bottom: 1.5rem;">
                <strong>Note:</strong> The Tabs component uses a programmatic API with AddTab().
                A declarative child component API is planned for a future release.
            </Alert>

            <Card>
                <div style="padding: 1rem;">
                    <p>Current implementation requires programmatic tab registration.</p>
                    <p>See the code examples below for usage patterns.</p>
                </div>
            </Card>
        </div>
    </PreviewContent>

    <Examples>
        <div class="example-item">
            <h3>How It Works</h3>
            <p>The current Tabs component implementation uses an internal API where tabs are registered programmatically:</p>
            <CodeBlock Code="@HowItWorksCode" Language="csharp" />
        </div>

        <div class="example-item">
            <h3>Component Structure</h3>
            <p>The Tabs component renders:</p>
            <ul>
                <li>A tab list with clickable tab triggers</li>
                <li>Tab panels that show/hide based on the active tab</li>
                <li>Proper ARIA attributes for accessibility</li>
            </ul>
            <CodeBlock Code="@StructureCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>Creating Tabs Programmatically</h3>
            <p>Tabs are added via the internal AddTab() method:</p>
            <CodeBlock Code="@ProgrammaticCode" Language="csharp" />
        </div>

        <div class="example-item">
            <h3>Controlled State</h3>
            <p>You can control which tab is active using two-way binding:</p>
            <CodeBlock Code="@ControlledCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>Tab Events</h3>
            <p>Listen to tab activation events:</p>
            <CodeBlock Code="@EventsCode" Language="razor" />
        </div>

        <div class="example-item">
            <h3>Future API (Planned)</h3>
            <p>A declarative child component API is planned for easier usage:</p>
            <CodeBlock Code="@FutureApiCode" Language="razor" />
            <Alert Variant="AlertVariant.Warning" style="margin-top: 1rem;">
                <strong>Coming Soon:</strong> This declarative API is not yet implemented.
                Use the programmatic approach shown above for now.
            </Alert>
        </div>
    </Examples>

    <Props>
        <table class="api-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Default</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>ActiveTabId</code></td>
                    <td>string</td>
                    <td>null</td>
                    <td>ID of the currently active tab</td>
                </tr>
                <tr>
                    <td><code>ActiveTabIdChanged</code></td>
                    <td>EventCallback&lt;string&gt;</td>
                    <td>-</td>
                    <td>Callback when active tab changes (enables two-way binding)</td>
                </tr>
                <tr>
                    <td><code>OnTabActivated</code></td>
                    <td>EventCallback&lt;TabActivatedEventArgs&gt;</td>
                    <td>-</td>
                    <td>Event fired when a tab is activated</td>
                </tr>
                <tr>
                    <td><code>ChildContent</code></td>
                    <td>RenderFragment</td>
                    <td>-</td>
                    <td>Child content (currently for future child components)</td>
                </tr>
                <tr>
                    <td><code>Class</code></td>
                    <td>string</td>
                    <td>""</td>
                    <td>Additional CSS classes</td>
                </tr>
                <tr>
                    <td><code>AdditionalAttributes</code></td>
                    <td>Dictionary&lt;string, object&gt;</td>
                    <td>null</td>
                    <td>Additional HTML attributes</td>
                </tr>
            </tbody>
        </table>
    </Props>

    <Events>
        <table class="api-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>ActiveTabIdChanged</code></td>
                    <td>EventCallback&lt;string&gt;</td>
                    <td>Fires when the active tab ID changes</td>
                </tr>
                <tr>
                    <td><code>OnTabActivated</code></td>
                    <td>EventCallback&lt;TabActivatedEventArgs&gt;</td>
                    <td>Fires when a tab is activated with tab details</td>
                </tr>
            </tbody>
        </table>

        <h4 style="margin-top: 1.5rem;">TabActivatedEventArgs</h4>
        <table class="api-table">
            <thead>
                <tr>
                    <th>Property</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>TabId</code></td>
                    <td>string</td>
                    <td>The ID of the activated tab</td>
                </tr>
                <tr>
                    <td><code>Title</code></td>
                    <td>RenderFragment</td>
                    <td>The title/label of the activated tab</td>
                </tr>
            </tbody>
        </table>
    </Events>

    <AccessibilityNotes>
        <ul>
            <li>Uses proper ARIA roles: <code>role="tablist"</code>, <code>role="tab"</code>, and <code>role="tabpanel"</code></li>
            <li><code>aria-selected</code> attribute on active tab button</li>
            <li>Tab panels have unique IDs for proper labeling</li>
            <li>Disabled tabs use the <code>disabled</code> attribute</li>
            <li>Keyboard navigation should be implemented (currently limited to click)</li>
        </ul>
    </AccessibilityNotes>
</ComponentPage>

@code {
    private List<string> relatedComponents = new() { "Accordion", "Stepper", "Menu", "Collapsible" };

    private string HowItWorksCode => @"// Internal TabItem class structure
internal class TabItem
{
    public string Id { get; }
    public RenderFragment Title { get; }
    public RenderFragment Content { get; }
    public bool Disabled { get; }
    public bool DefaultActive { get; }
}

// Tabs component maintains a list of TabItem instances
private List<TabItem> _tabs = new();

// Tabs are added via internal AddTab() method
internal void AddTab(TabItem tab)
{
    _tabs.Add(tab);
    // First tab or DefaultActive tab becomes active
}";

    private string StructureCode => @"<!-- Rendered HTML structure -->
<div class=""vibe-tabs"">
    <!-- Tab triggers -->
    <div class=""vibe-tabs-list"" role=""tablist"">
        <button type=""button""
                class=""vibe-tabs-trigger vibe-tabs-trigger-active""
                role=""tab""
                aria-selected=""true"">
            Tab 1
        </button>
        <button type=""button""
                class=""vibe-tabs-trigger""
                role=""tab""
                aria-selected=""false"">
            Tab 2
        </button>
    </div>

    <!-- Tab panels -->
    <div class=""vibe-tabs-content"">
        <div class=""vibe-tabs-panel vibe-tabs-panel-active""
             role=""tabpanel"">
            Content 1
        </div>
        <div class=""vibe-tabs-panel""
             role=""tabpanel"">
            Content 2
        </div>
    </div>
</div>";

    private string ProgrammaticCode => @"@* Current implementation requires creating a wrapper or custom component *@

@code {
    private Tabs tabsRef;

    protected override void OnInitialized()
    {
        // Tabs need to be added programmatically
        // This requires accessing the component's internal API
        // A declarative child component approach is recommended for future releases
    }
}";

    private string ControlledCode => @"<Tabs @bind-ActiveTabId=""@currentTabId"">
    @* Tabs would be registered here *@
</Tabs>

<p>Current Active Tab: @currentTabId</p>

@code {
    private string currentTabId = ""tab1"";
}";

    private string EventsCode => @"<Tabs ActiveTabId=""@activeTab""
      ActiveTabIdChanged=""@OnActiveTabChanged""
      OnTabActivated=""@OnTabActivated"">
    @* Tab content *@
</Tabs>

@code {
    private string activeTab = ""home"";

    private void OnActiveTabChanged(string newTabId)
    {
        Console.WriteLine($""Tab changed to: {newTabId}"");
        activeTab = newTabId;
    }

    private void OnTabActivated(Tabs.TabActivatedEventArgs args)
    {
        Console.WriteLine($""Tab {args.TabId} was activated"");
    }
}";

    private string FutureApiCode => @"@* Planned declarative API (not yet implemented) *@
<Tabs @bind-ActiveTabId=""@activeTab"">
    <TabList>
        <TabTrigger Id=""home"">Home</TabTrigger>
        <TabTrigger Id=""profile"">Profile</TabTrigger>
        <TabTrigger Id=""settings"" Disabled=""true"">Settings</TabTrigger>
    </TabList>
    <TabPanels>
        <TabPanel Id=""home"">
            <h3>Home Content</h3>
            <p>Welcome to the home tab.</p>
        </TabPanel>
        <TabPanel Id=""profile"">
            <h3>Profile Content</h3>
            <p>Your profile information goes here.</p>
        </TabPanel>
        <TabPanel Id=""settings"">
            <h3>Settings Content</h3>
            <p>Application settings.</p>
        </TabPanel>
    </TabPanels>
</Tabs>

@code {
    private string activeTab = ""home"";
}";
}
