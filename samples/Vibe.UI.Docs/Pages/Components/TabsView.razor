@page "/components/tabs"

<PageTitle>Tabs - Vibe.UI</PageTitle>

<div class="max-w-4xl">
    <!-- Header -->
    <header class="mb-8">
        <div class="flex items-center gap-2 text-sm text-zinc-500 mb-2">
            <a href="/" class="hover:text-zinc-700 dark:hover:text-zinc-300">Docs</a>
            <span>/</span>
            <a href="/components" class="hover:text-zinc-700 dark:hover:text-zinc-300">Components</a>
            <span>/</span>
            <span class="text-zinc-900 dark:text-zinc-100">Tabs</span>
        </div>
        <h1 class="text-3xl font-bold text-zinc-900 dark:text-zinc-100 mb-3">Tabs</h1>
        <p class="text-lg text-zinc-600 dark:text-zinc-400">
            Organizes content into multiple panels where only one is visible at a time with tab navigation.
        </p>
    </header>

    <!-- Preview -->
    <section class="mb-12">
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-4">Preview</h2>
        <div class="p-6 rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900">
            <Alert Variant="AlertVariant.Info" Title="Note">
                The Tabs component uses a programmatic API with AddTab().
                A declarative child component API is planned for a future release.
            </Alert>
            <div class="mt-4">
                <Card>
                    <div class="p-4 text-zinc-600 dark:text-zinc-400">
                        <p class="mb-2">Current implementation requires programmatic tab registration.</p>
                        <p>See the code examples below for usage patterns.</p>
                    </div>
                </Card>
            </div>
        </div>
    </section>

    <!-- Examples Section -->
    <section class="mb-12">
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-6">Examples</h2>

        <!-- How It Works -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-3">How It Works</h3>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                The current Tabs component implementation uses an internal API where tabs are registered programmatically.
            </p>
            <CodeBlock Code="@HowItWorksCode" Language="csharp" />
        </div>

        <!-- Component Structure -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-3">Component Structure</h3>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                The Tabs component renders:
            </p>
            <ul class="list-disc list-inside text-zinc-600 dark:text-zinc-400 mb-4 space-y-1">
                <li>A tab list with clickable tab triggers</li>
                <li>Tab panels that show/hide based on the active tab</li>
                <li>Proper ARIA attributes for accessibility</li>
            </ul>
            <CodeBlock Code="@StructureCode" Language="razor" />
        </div>

        <!-- Creating Tabs Programmatically -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-3">Creating Tabs Programmatically</h3>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Tabs are added via the internal AddTab() method.
            </p>
            <CodeBlock Code="@ProgrammaticCode" Language="csharp" />
        </div>

        <!-- Controlled State -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-3">Controlled State</h3>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                You can control which tab is active using two-way binding.
            </p>
            <CodeBlock Code="@ControlledCode" Language="razor" />
        </div>

        <!-- Tab Events -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-3">Tab Events</h3>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                Listen to tab activation events.
            </p>
            <CodeBlock Code="@EventsCode" Language="razor" />
        </div>

        <!-- Future API -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-3">Future API (Planned)</h3>
            <p class="text-zinc-600 dark:text-zinc-400 mb-4">
                A declarative child component API is planned for easier usage.
            </p>
            <CodeBlock Code="@FutureApiCode" Language="razor" />
            <div class="mt-3">
                <Alert Variant="AlertVariant.Default" Title="Coming Soon">
                    This declarative API is not yet implemented.
                    Use the programmatic approach shown above for now.
                </Alert>
            </div>
        </div>
    </section>

    <!-- API Reference -->
    <section class="mb-12">
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-6">API Reference</h2>

        <!-- Properties -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-4">Properties</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-zinc-200 dark:border-zinc-700">
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Name</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Type</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Default</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Description</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-zinc-100 dark:divide-zinc-800">
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">ActiveTabId</td>
                            <td class="py-3 px-4"><TypeBadge Type="string" /></td>
                            <td class="py-3 px-4 text-zinc-500">null</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">ID of the currently active tab</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">ActiveTabIdChanged</td>
                            <td class="py-3 px-4"><TypeBadge Type="EventCallback&lt;string&gt;" /></td>
                            <td class="py-3 px-4 text-zinc-500">—</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Callback when active tab changes (enables two-way binding)</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">OnTabActivated</td>
                            <td class="py-3 px-4"><TypeBadge Type="EventCallback&lt;TabActivatedEventArgs&gt;" /></td>
                            <td class="py-3 px-4 text-zinc-500">—</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Event fired when a tab is activated</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">ChildContent</td>
                            <td class="py-3 px-4"><TypeBadge Type="RenderFragment" /></td>
                            <td class="py-3 px-4 text-zinc-500">—</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Child content (currently for future child components)</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">Class</td>
                            <td class="py-3 px-4"><TypeBadge Type="string" /></td>
                            <td class="py-3 px-4 text-zinc-500">""</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Additional CSS classes</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">AdditionalAttributes</td>
                            <td class="py-3 px-4"><TypeBadge Type="Dictionary&lt;string, object&gt;" /></td>
                            <td class="py-3 px-4 text-zinc-500">null</td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Additional HTML attributes</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Events -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-4">Events</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-zinc-200 dark:border-zinc-700">
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Name</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Type</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Description</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-zinc-100 dark:divide-zinc-800">
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">ActiveTabIdChanged</td>
                            <td class="py-3 px-4"><TypeBadge Type="EventCallback&lt;string&gt;" /></td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Fires when the active tab ID changes</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">OnTabActivated</td>
                            <td class="py-3 px-4"><TypeBadge Type="EventCallback&lt;TabActivatedEventArgs&gt;" /></td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">Fires when a tab is activated with tab details</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- TabActivatedEventArgs -->
        <div class="mb-8">
            <h3 class="text-lg font-medium text-zinc-800 dark:text-zinc-200 mb-4">TabActivatedEventArgs</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-zinc-200 dark:border-zinc-700">
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Property</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Type</th>
                            <th class="text-left py-3 px-4 font-medium text-zinc-900 dark:text-zinc-100">Description</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-zinc-100 dark:divide-zinc-800">
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">TabId</td>
                            <td class="py-3 px-4"><TypeBadge Type="string" /></td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">The ID of the activated tab</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-mono text-sm text-zinc-900 dark:text-zinc-100">Title</td>
                            <td class="py-3 px-4"><TypeBadge Type="RenderFragment" /></td>
                            <td class="py-3 px-4 text-zinc-600 dark:text-zinc-400">The title/label of the activated tab</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Installation -->
    <section class="mb-12">
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-4">Installation</h2>
        <p class="text-zinc-600 dark:text-zinc-400 mb-4">
            Install the Tabs component using the Vibe.UI CLI:
        </p>
        <CodeBlock Code="vibe add tabs" Language="bash" />
    </section>

    <!-- Accessibility -->
    <section class="mb-12">
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-4">Accessibility</h2>
        <ul class="space-y-2 text-zinc-600 dark:text-zinc-400">
            <li class="flex items-start gap-2">
                <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                Uses proper ARIA roles: <code class="text-sm bg-zinc-100 dark:bg-zinc-800 px-1 py-0.5 rounded">role="tablist"</code>, <code class="text-sm bg-zinc-100 dark:bg-zinc-800 px-1 py-0.5 rounded">role="tab"</code>, and <code class="text-sm bg-zinc-100 dark:bg-zinc-800 px-1 py-0.5 rounded">role="tabpanel"</code>
            </li>
            <li class="flex items-start gap-2">
                <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                <code class="text-sm bg-zinc-100 dark:bg-zinc-800 px-1 py-0.5 rounded">aria-selected</code> attribute on active tab button
            </li>
            <li class="flex items-start gap-2">
                <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                Tab panels have unique IDs for proper labeling
            </li>
            <li class="flex items-start gap-2">
                <svg class="w-5 h-5 text-green-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                Disabled tabs use the <code class="text-sm bg-zinc-100 dark:bg-zinc-800 px-1 py-0.5 rounded">disabled</code> attribute
            </li>
            <li class="flex items-start gap-2">
                <svg class="w-5 h-5 text-amber-500 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                </svg>
                Keyboard navigation should be implemented (currently limited to click)
            </li>
        </ul>
    </section>

    <!-- Related Components -->
    <section>
        <h2 class="text-xl font-semibold text-zinc-900 dark:text-zinc-100 mb-4">Related</h2>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <a href="/components/accordion" class="group p-4 rounded-lg border border-zinc-200 dark:border-zinc-700 hover:border-brand-teal dark:hover:border-brand-teal transition-colors">
                <h4 class="font-medium text-zinc-900 dark:text-zinc-100 group-hover:text-brand-teal">Accordion</h4>
                <p class="text-sm text-zinc-500">Collapsible content sections</p>
            </a>
            <a href="/components/stepper" class="group p-4 rounded-lg border border-zinc-200 dark:border-zinc-700 hover:border-brand-teal dark:hover:border-brand-teal transition-colors">
                <h4 class="font-medium text-zinc-900 dark:text-zinc-100 group-hover:text-brand-teal">Stepper</h4>
                <p class="text-sm text-zinc-500">Multi-step progress indicator</p>
            </a>
            <a href="/components/menu" class="group p-4 rounded-lg border border-zinc-200 dark:border-zinc-700 hover:border-brand-teal dark:hover:border-brand-teal transition-colors">
                <h4 class="font-medium text-zinc-900 dark:text-zinc-100 group-hover:text-brand-teal">Menu</h4>
                <p class="text-sm text-zinc-500">Dropdown action menus</p>
            </a>
        </div>
    </section>
</div>

@code {
    private string HowItWorksCode => @"// Internal TabItem class structure
internal class TabItem
{
    public string Id { get; }
    public RenderFragment Title { get; }
    public RenderFragment Content { get; }
    public bool Disabled { get; }
    public bool DefaultActive { get; }
}

// Tabs component maintains a list of TabItem instances
private List<TabItem> _tabs = new();

// Tabs are added via internal AddTab() method
internal void AddTab(TabItem tab)
{
    _tabs.Add(tab);
    // First tab or DefaultActive tab becomes active
}";

    private string StructureCode => @"<!-- Rendered HTML structure -->
<div class=""vibe-tabs"">
    <!-- Tab triggers -->
    <div class=""vibe-tabs-list"" role=""tablist"">
        <button type=""button""
                class=""vibe-tabs-trigger vibe-tabs-trigger-active""
                role=""tab""
                aria-selected=""true"">
            Tab 1
        </button>
        <button type=""button""
                class=""vibe-tabs-trigger""
                role=""tab""
                aria-selected=""false"">
            Tab 2
        </button>
    </div>

    <!-- Tab panels -->
    <div class=""vibe-tabs-content"">
        <div class=""vibe-tabs-panel vibe-tabs-panel-active""
             role=""tabpanel"">
            Content 1
        </div>
        <div class=""vibe-tabs-panel""
             role=""tabpanel"">
            Content 2
        </div>
    </div>
</div>";

    private string ProgrammaticCode => @"@* Current implementation requires creating a wrapper or custom component *@

@code {
    private Tabs tabsRef;

    protected override void OnInitialized()
    {
        // Tabs need to be added programmatically
        // This requires accessing the component's internal API
        // A declarative child component approach is recommended for future releases
    }
}";

    private string ControlledCode => @"<Tabs @bind-ActiveTabId=""@currentTabId"">
    @* Tabs would be registered here *@
</Tabs>

<p>Current Active Tab: @currentTabId</p>

@code {
    private string currentTabId = ""tab1"";
}";

    private string EventsCode => @"<Tabs ActiveTabId=""@activeTab""
      ActiveTabIdChanged=""@OnActiveTabChanged""
      OnTabActivated=""@OnTabActivated"">
    @* Tab content *@
</Tabs>

@code {
    private string activeTab = ""home"";

    private void OnActiveTabChanged(string newTabId)
    {
        Console.WriteLine($""Tab changed to: {newTabId}"");
        activeTab = newTabId;
    }

    private void OnTabActivated(Tabs.TabActivatedEventArgs args)
    {
        Console.WriteLine($""Tab {args.TabId} was activated"");
    }
}";

    private string FutureApiCode => @"@* Planned declarative API (not yet implemented) *@
<Tabs @bind-ActiveTabId=""@activeTab"">
    <TabList>
        <TabTrigger Id=""home"">Home</TabTrigger>
        <TabTrigger Id=""profile"">Profile</TabTrigger>
        <TabTrigger Id=""settings"" Disabled=""true"">Settings</TabTrigger>
    </TabList>
    <TabPanels>
        <TabPanel Id=""home"">
            <h3>Home Content</h3>
            <p>Welcome to the home tab.</p>
        </TabPanel>
        <TabPanel Id=""profile"">
            <h3>Profile Content</h3>
            <p>Your profile information goes here.</p>
        </TabPanel>
        <TabPanel Id=""settings"">
            <h3>Settings Content</h3>
            <p>Application settings.</p>
        </TabPanel>
    </TabPanels>
</Tabs>

@code {
    private string activeTab = ""home"";
}";
}
