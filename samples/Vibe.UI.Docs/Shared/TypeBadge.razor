@*
    TypeBadge - Displays property types with color coding
    Used in API reference tables to show parameter types
*@

<span class="@BadgeClass">@Type</span>

@code {
    /// <summary>
    /// The type name to display (e.g., "string", "bool", "ButtonVariant").
    /// </summary>
    [Parameter]
    public string Type { get; set; } = string.Empty;

    /// <summary>
    /// Optional size variant.
    /// </summary>
    [Parameter]
    public TypeBadgeSize Size { get; set; } = TypeBadgeSize.Default;

    private string BadgeClass
    {
        get
        {
            var baseClasses = Size switch
            {
                TypeBadgeSize.Small => "vibe-px-1.5 vibe-py-0.5 vibe-text-[10px]",
                TypeBadgeSize.Large => "vibe-px-2.5 vibe-py-1 vibe-text-sm",
                _ => "vibe-px-2 vibe-py-0.5 vibe-text-xs"
            };

            var colorClasses = GetColorClasses(Type);

            return $"vibe-inline-flex vibe-items-center vibe-font-mono vibe-font-medium vibe-rounded-md {baseClasses} {colorClasses}";
        }
    }

    private string GetColorClasses(string type)
    {
        var normalizedType = type.ToLower().Trim();

        // Boolean types
        if (normalizedType is "bool" or "boolean")
            return "vibe-bg-purple-100 vibe-text-purple-700 dark:vibe-bg-purple-900/30 dark:vibe-text-purple-400";

        // String types
        if (normalizedType is "string" or "string?" or "markupstring")
            return "vibe-bg-emerald-100 vibe-text-emerald-700 dark:vibe-bg-emerald-900/30 dark:vibe-text-emerald-400";

        // Number types
        if (normalizedType is "int" or "int?" or "double" or "double?" or "float" or "decimal" or "number")
            return "vibe-bg-blue-100 vibe-text-blue-700 dark:vibe-bg-blue-900/30 dark:vibe-text-blue-400";

        // Event callbacks
        if (normalizedType.StartsWith("eventcallback") || normalizedType.Contains("action") || normalizedType.Contains("func"))
            return "vibe-bg-amber-100 vibe-text-amber-700 dark:vibe-bg-amber-900/30 dark:vibe-text-amber-400";

        // Render fragments
        if (normalizedType.Contains("renderfragment"))
            return "vibe-bg-pink-100 vibe-text-pink-700 dark:vibe-bg-pink-900/30 dark:vibe-text-pink-400";

        // Enums (usually contain "variant", "size", "type", etc.)
        if (normalizedType.Contains("variant") || normalizedType.Contains("size") || normalizedType.Contains("position") || normalizedType.Contains("orientation"))
            return "vibe-bg-orange-100 vibe-text-orange-700 dark:vibe-bg-orange-900/30 dark:vibe-text-orange-400";

        // Default for other types
        return "vibe-bg-zinc-100 vibe-text-zinc-700 dark:vibe-bg-zinc-800 dark:vibe-text-zinc-400";
    }

    public enum TypeBadgeSize
    {
        Small,
        Default,
        Large
    }
}
